#
# Project    : ipv6calc
# File       : Makefile[.in]
# Version    : $Id: Makefile.in,v 1.21 2002/03/18 20:03:32 peter Exp $
# Copyright  : 2001-2002 by Peter Bieringer <pb (at) bieringer.de>
#
# Information:
#  Makefile for ipv6calc project
#

# Compiler and Linker Options
COPTS = -O2 -Wall -g

CFLAGS	= $(COPTS) -Igetopt/

CC	= gcc

GETOBJS	= getopt/getopt.o getopt/getopt1.o

all:		ipv6calc ipv6logconv

.c.o:
		$(CC) $(CFLAGS) -c $<


ipv6logconv:	getopt-make lib-make ipv6logconv-make

ipv6calc:	getopt-make lib-make ipv6calc-make

distclean:
		make clean
		cd ipv6calc/ && make distclean
		rm -f config.cache config.status config.log

autoclean:
		make distclean
		rm -f Makefile
		rm -f version.h
		rm -f contrib/ipv6calc.spec
		rm config.h

clean:
		cd getopt/ && make clean
		cd ipv6logconv/ && make clean
		cd ipv6calc/ && make clean
		cd lib/ && make clean

install:
		make test
		cd ipv6logconv/ && make test
		cd ipv6calc/ && make test
		make installonly

installonly:
		mkdir -p $(root)/bin/
		install -m 755 -o root -g root ipv6calc/ipv6calc $(root)/bin/
		mkdir -p $(root)/usr/bin/
		install -m 755 -o root -g root ipv6logconv/ipv6logconv $(root)/usr/bin/

getopt-make:
		cd getopt/ && make

lib-make:
		cd lib/ && make

ipv6logconv-make:
		cd ipv6logconv/ && make

ipv6calc-make:
		cd ipv6calc/ && make

test:
		cd ipv6logconv/ && make test
		cd ipv6calc/ && make test

# Project    : ipv6calc
# File       : Makefile[.in]
# Version    : $Id: Makefile.in,v 1.31 2004/08/30 20:27:32 peter Exp $
# Copyright  : 2001-2003 by Peter Bieringer <pb (at) bieringer.de>
#
# Information:
#  Makefile for ipv6calc project
#

# Compiler and Linker Options
COPTS = -O2 -Wall -g

CFLAGS	= $(COPTS) -Igetopt/

CC	= gcc

GETOBJS	= getopt/getopt.o getopt/getopt1.o

all:		ipv6calc ipv6logconv ipv6logstats

.c.o:
		$(CC) $(CFLAGS) -c $<


ipv6logconv:	getopt-make lib-make ipv6logconv-make

ipv6logstats:	getopt-make lib-make ipv6logstats-make

ipv6calc:	getopt-make lib-make ipv6calc-make ipv6calcweb-make db-ieee-oui-make db-ipv4-assignment-make

distclean:
		make clean
		rm -f config.cache config.status config.log
		for dir in ipv6logconv ipv6logstats ipv6calcweb ipv6calc man lib databases/ieee-oui databases/ipv4-assignment; do \
			pushd $$dir && make distclean; popd; \
		done

autoclean:
		make distclean
		rm -f Makefile
		rm -f version.h
		rm -f contrib/ipv6calc.spec
		rm config.h
		for dir in ipv6logconv ipv6logstats ipv6calcweb ipv6calc man lib; do \
			pushd $$dir && make autoclean; popd;\
		done

clean:
		for dir in ipv6logconv ipv6logstats ipv6calcweb ipv6calc man lib; do \
			pushd $$dir && make clean; popd; \
		done

install:
		make test
		make installonly

installonly:
		for dir in ipv6logconv ipv6logstats ipv6calcweb ipv6calc man lib; do \
			pushd $$dir && make install; popd; \
		done

getopt-make:
		cd getopt && make

lib-make:
		cd lib && make

ipv6logconv-make: lib-make
		cd ipv6logconv && make

ipv6logstats-make: lib-make
		cd ipv6logstats && make

ipv6calc-make:	lib-make
		cd ipv6calc && make

ipv6calcweb-make:
		cd ipv6calcweb && make

db-ieee-oui-make:
		cd databases/ieee-oui && make

db-ipv4-assignment-make:
		cd databases/ipv4-assignment && make

update:
		for dir in databases/ieee-oui databases/ipv4-assignment; do \
			pushd $$dir && make update; popd; \
		done

static:		ipv6logconv-make ipv6logstats-make ipv6calc-make	
		for dir in ipv6logconv ipv6logstats ipv6calc; do \
			pushd $$dir && make static; popd; \
		done

test:
		for dir in ipv6logconv ipv6logstats ipv6calcweb ipv6calc man lib; do \
			pushd $$dir && make test; popd; \
		done

dnl Project: ipv6calc
dnl File   : configure.in
dnl Version: $Id: configure.in,v 1.4 2003/11/21 10:31:21 peter Exp $

dnl Process this file with autoconf to produce a configure script.
AC_INIT(ipv6calc/ipv6calc.c)

dnl Get version
IPV6CALC_VERSION=`cat VERSION | grep '^VERSION' | head -1 | awk '{ print $2 }'`

dnl Define version header
AC_CONFIG_HEADER(config.h)

dnl Checks for programs.
AC_PROG_AWK
AC_PROG_CC
dnl AC_PROG_INSTALL
AC_PROG_MAKE_SET

dnl Checks for header files.
AC_HEADER_STDC
AC_CHECK_HEADERS(openssl/md5.h, [], [echo "*** Problem: md5 is needed for RFC 3041 conversions"; exit 1])

dnl Checks for libraries.
AC_CHECK_LIB(crypto, MD5_Init, [], [echo "*** Problem: md5 is needed for RFC 3041 conversions"; exit 1])
AC_CHECK_LIB(crypto, MD5_Update, [], [echo "*** Problem: md5 is needed for RFC 3041 conversions"; exit 1])
AC_CHECK_LIB(crypto, MD5_Final, [], [echo "*** Problem: md5 is needed for RFC 3041 conversions"; exit 1])

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
AC_TYPE_OFF_T
AC_TYPE_SIZE_T

dnl Checks for library functions.
AC_FUNC_MEMCMP
AC_CHECK_FUNCS(strspn strstr)

dnl Define version
AC_DEFINE_UNQUOTED(IPV6CALC_VERSION, "${IPV6CALC_VERSION}")

dnl Substitute version
AC_SUBST(IPV6CALC_VERSION)

AC_OUTPUT([Makefile ipv6calc/Makefile man/Makefile ipv6logconv/Makefile ipv6logstats/Makefile version.h contrib/ipv6calc.spec])
